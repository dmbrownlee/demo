# lab26-1: Podman Container Practice

## OBJECTIVE

Practice using skopeo and podman

## SETUP

No special setup is needed.

## STEPS

On server2:
  1. Install the software you need to run containers on server2
  1. Search the container registries for dmbrownlee.  Where are they hosted?
  1. Inspect the dmbrownlee/alpine image without downloading it first
  1. What variable can you override and how would you do that?
  1. Without downloading the container images, what is the difference between Red Hat's ubi8-minimal and ubi8-micro images?
  1. Download and run docker.io/grafana/grafana container such that:
      1. It runs rootless
      1. It runs in the background, dettached from the terminal
      1. The container has the name "grafana"
      1. The grafana webapp running on port 3000 inside the container is available on port 3000 on the host
      1. The container saves the state of its /var/lib/grafana directory to some diractory on the server2
      1. The container deletes itself when it is stopped
  1. Verify the container is running (troubleshoot if it isn't before continuing)

On server1:
  1. Open firefox and navigate to http://server2:3000
  1. Login to the grafana webapp with username "admin" and password "admin"
  1. Set a new password
  1. Make a change and save it (for example, add a default dashboard)
  1. Logout (icon on bottom left)

Back on server2:
  1. Attach and interactive shell to the running grafana
  1. Observe the output of "ls -l /bin"
  1. Observe the output of "netstat -ntlp"
  1. Observe the output of "ps -ef"
  1. How would you get process info if ps was not installed?
  1. Exit the shell and stop the running container
  1. Verify the container deleted itself
  1. Configure systemd to start the container rootless on system boot (multple steps with a gotcha!)

## CONFIRMATION

You will know you have completed this lab successfully when the following are true:

  1. Grafana is running on server2 after a reboot with no interaction on your part (including logging in)
  1. The changes you made to grafana persist between reboots
