---
- name: Ensure localhost is configured as a virtualization host
  hosts: localhost
  roles:
    - role: baseline
      tags: baseline
    - role: virtualization_host
      tags: virtualization_host
    - role: gns3_host
      tags: gns3_host

- name: Ensure virtual lab environment for networkplus is configured
  hosts: localhost
  tags: networkplus

  tasks:
    - name: Ensure the required Vagrant boxes have been built
      include_role:
        name: vagrantbox
        apply:
          tags: vagrantbox
      vars:
        boxes:
          - { distro: debian, version: "11.4.0", configuration: default }
          # - { distro: pfsense, version: "2.6.0", configuration: default, distro_uses_var_file: true }
      tags: vagrantbox

- name: Ensure virtual lab environment for rhcsa is configured
  hosts: localhost
  tags: rhcsa

  tasks:
    - name: Ensure the required Vagrant boxes have been built
      include_role:
        name: vagrantbox
        apply:
          tags: vagrantbox
      vars:
        boxes:
          - { distro: rocky, version: "9", configuration: core }
          - { distro: rocky, version: "9", configuration: minimal }
          - { distro: rocky, version: "9", configuration: gse }
      tags: vagrantbox
