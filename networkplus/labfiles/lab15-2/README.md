## Intermediate instructions for configuring networks on a virtual machine. 

It looks like you may have managed to create your virtual machine successfully, congrats, now it time for the fun part, configuring your personal lab envrionment and machines.

_________________________________________________________________________
_________________________________________________________________________


## Section 1: Setting up the base System in virtualbox

									Note 
	This configuration is just to network the local machines vms to each other. 
	To access machines, repos and vms outside the local virtual network, additonal configuration will need to be done. 
	That will be shown in lab 15-3
	
	
1. We will need a base line to start. For this exercise we are going to use the default parameters generated by the first virtual machine we created in lab 15-1. So within the VirtualBox Manager we will select the original Machine which for me is `Client`. Once that is selected we will want to go into its settings. Either by 
        
	a. Clicking `settings` up in the top center of the window, 
        
	b. Or by holding down the key combo `cmd + s`
        
	c. Within settings, we will want to navigate to the `Network` and then select `Adapter 1`
	
                                    --------Insert image of network adapter 1 here---------
    
2. In the `Adapter 1` section we will want to

	a. Enable Network Adapter 
	
	b. Attach the network adapter to `Internal Network`
	
	c. Name: $intnet-1
	
	d. Under advanced ensure the cable is connected
            

_________________________________________________________________________
_________________________________________________________________________


## Section 2: Configuring the servers network settings


Next we will want to ensure that the machine is configured to our liking and that the interface is activated on the virtual machine. In linux we will want to open up a terminal. Once open we will want to run the command `sudo nmtui` here we can edit our servers network configuration with a graphical interface. Within the graphical environment we see 3 fields, Edit, Activate and Hostname.

Lets go ahead and edit the configuration first 

1. To configure, use your keys to hightlight `Edit a connection` press enter, and the select the network interface, after you have selected the network interface, we should see a configuration prompt, here we can choose to configure ipv4, ipv6 automatic connection and availability. 

	a. For this lesson I will just configure ipv4 manually with the parameters shown below 
		Configuration: Manual
		Address: 10.0.0.10
		Gateway 10.0.0.1
		DNS 8.8.8.8
		[x] Require ipv4
		[x]Automatically Connect

	b. Next we will Activate the interface, to do this navigate back to the home screen of nmtui. Once we are at the main page you should see, `Activate a Connection` select that to enter the menu options. Next we will want to  highlight the interface and pressing <Activate>. This should activate the interface without rebooting
		Note: The interface should have a * by it to endicate it is active, 
		Ex; * enp0s3

	c. Next we can change the hostname if you wish by navigating back to the main screen in nmtui. I changed mine to serve1.localdomain. Finally we can hit okay to save our changes
    

_________________________________________________________________________
_________________________________________________________________________
							
								Bonus 

This section we are going to test the configuration thus far and assign your hosts to their static IP's! We will want a command prompt for this one 

1. lets try a few ping commands, if you have not ran this command before, use the key combo <control(^)+c> to stop the ping command
		a. `<ping 10.0.0.10>, <ping 10.0.0.1> <ping 10.0.0.11> and <ping 8.8.8.8>`
	
2. If configured correctly, ping 10.0.0.10 should have been the only ip that had any connection, this is because the only thing currently on this network, is the server itself, no other nodes can be found on this network. Download nmap and take a look, but lets move on with this lab, it is getting lengthy.. oh if you want, lets assign our servers to their ip's right quick by running the following commands
	
	a. first lets change into a root shell `sudo -i` <Keep in mind, navigating in a root shell is very dangerous, but this is not a linux course, so we are going to cut a few corners for the sake of time>
	
	b. now lets add some text to a configuration files `echo 10.0.0.10 server1 >> /etc/hosts && echo 10.0.0.11 server2 /etc/hosts && echo 10.0.0.1 gateway >> /etc/hosts`
	
	c. now we can check the assignment by running `cat /etc/hosts`
	
	d. Now lets exit out of the root shell by running the command `exit`

Great, on to the next section
_________________________________________________________________________
_________________________________________________________________________



## Section 3: Generating a second machine





Fantastic, we have successfully create a baseline for our network, next lets clone a few machines, this way we can network a few seperate machines together 

1. You will want to open up the 'VirtualBox Manager Window', and from here you will want to select the machine we setup in the Lab 15-1 environment (the machine we have been configuring), once that is selected we will want to ensure the vm is powered down and then we will clone the machine, there are two ways of doing this
	
	a. Right click on the machine and select `clone`
	
	b. press key combo `cmd + o`

2. From here you will be able to name your machine, select the path in which the machine is saved, assign Mac address policy, and configure disk options. Given we are networking these machines as if they were two separate nodes, I will configure the cloned machine with the following parameters 
	
_________________________________________________________________________
								NOTE
--- $user and $VirtualBox_VMs are variables, this will be substituted with your username // account // Directory names. If you are unfamiliar with variables, it might be worth making a quick google search of `what is a variable in programming`. I found this to the be the most transparent definition (imo). All of that being said, the default generated parameters should be set the same as the original VM as far as directories go. Variables are going to come in handy when learning linux though, so I would get familiar with them when // if possible ---
_________________________________________________________________________

	a. Name: Server
	
	b. Path: /Users/$user/$Virtulbox_VMs
	
	c. Mac: Generate new MAC addresses for all network adapters
	
	d. unselect: keep Disk Names
	
	e. unselect: keep Hardware UUIDs

3. We will want to make this a full clone, just to ensure the nodes are completely separate on the system.

4. After the clone is Generated, we will want to revisit `Section 2: Configuring a servers Network Connection` but depending on the server, we will want to assign a different ip address To keep things simple I will assign the `server` IP as `10.0.0.11`. Once the ip is configured, try pinging the servers and even the host names!
` ping 10.0.0.10, ping server1`

5. Rinse and repeat with other vm's I recommend making 2 clones out of `client`, the first as `server` and the second as the `router` (This is for lesson 3. There, we will configure the gateway and link two seperate network interfaces together. That lesson is a bit more advanced as we dive deeper into linux networking tools, specifically `nmcli`.)
	
_________________________________________________________________________
_________________________________________________________________________



Awesome, hopefully you made it through, but if you have any questions or feel that anything is unclear please reach out to wellsjacob@ or wells0790@ and I will do my best to assist


								END


